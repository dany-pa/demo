(function(e){function t(t){for(var a,o,s=t[0],c=t[1],u=t[2],v=0,h=[];v<s.length;v++)o=s[v],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"3a62":function(e,t,n){},"9be9":function(e,t,n){"use strict";n("f44c")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("TrainingInteractiveMap")],1)},r=[],o=n("bee2"),s=n("d4ec"),c=n("262e"),u=n("2caf"),l=n("9ab4"),v=n("1b40"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isStarted?e._e():n("button",{on:{click:e.start}},[e._v("START")]),n("div",{staticClass:"mapContainer"},[n("div",{staticClass:"attack"},[n("div",{staticClass:"logo"}),n("div",{staticClass:"selectContainer"},[n("div",{staticClass:"select"},[n("div",{staticClass:"selectLabel"},[e._v("Атака из сегмента:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.segmentFrom,expression:"segmentFrom"}],attrs:{name:"segmentFrom"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.segmentFrom=t.target.multiple?n:n[0]},e.checkSegmentTo]}},[n("option",{attrs:{value:"0"}},[e._v("Internet")]),n("option",{attrs:{value:"1"}},[e._v("DMZ")]),n("option",{attrs:{value:"2"}},[e._v("Data Center")]),n("option",{attrs:{value:"3"}},[e._v("Office users")]),n("option",{attrs:{value:"4"}},[e._v("ASU")])])]),n("div",{staticClass:"select"},[n("div",{staticClass:"selectLabel"},[e._v("в сегмент:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.segmentTo,expression:"segmentTo"}],attrs:{name:"segmentFrom"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.segmentTo=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0",disabled:e.isDisabled(1)}},[e._v("Internet")]),n("option",{attrs:{value:"1",disabled:e.isDisabled(2)}},[e._v("DMZ")]),n("option",{attrs:{value:"2",disabled:e.isDisabled(3)}},[e._v("Data Center")]),n("option",{attrs:{value:"3",disabled:e.isDisabled(4)}},[e._v("Office users")]),n("option",{attrs:{value:"4",disabled:e.isDisabled(5)}},[e._v("ASU")])])])]),n("button",{ref:"startAttack",staticClass:"btn",on:{click:e.startAttackSegment}},[e._v("Начать атаку на сегмент")]),n("button",{ref:"startAttack",staticClass:"btn",on:{click:e.startAttackHost}},[e._v("Начать атаку на хост")]),n("button",{ref:"startAttack",staticClass:"btn-reset",on:{click:e.resetAttack}},[n("div",{staticClass:"clear ico"}),e._v(" Очистить карту ")])]),n("canvas",{ref:"canvas",staticClass:"canvas"})]),n("div",{attrs:{id:"labels"}}),e._m(0)])},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hostInfo hostInfoTemplate"},[n("div",{staticClass:"row"},[n("span",[e._v("Сегмент:")]),e._v(" "),n("span",{staticClass:"segment"})]),n("div",{staticClass:"row"},[n("span",[e._v("Хост:")]),e._v(" "),n("span",{staticClass:"host"})]),n("div",{staticClass:"row"},[n("span",[e._v("IP хоста:")]),e._v(" "),n("span",{staticClass:"ip"})]),n("div",{staticClass:"corner"})])}],f=n("1da1"),m=(n("d3b7"),n("ddb0"),n("159b"),n("b0c0"),n("96cf"),n("626a")),p=4,b=4,w=.1,O=n("d5e4"),g=n("5364"),j=n("9bd1"),k=(n("6062"),n("3ca3"),n("99af"),n("10d1"),n("0fb9")),M=n("83fa"),y=new M["a"],x=new WeakMap,S=new WeakMap,D=new WeakMap,R=new WeakMap,T=new WeakMap,_=new WeakMap,A=new WeakMap,C=new WeakMap,I=function(){function e(t,n,a,i,r,o){Object(s["a"])(this,e),Object(O["a"])(this,x,{writable:!0,value:void 0}),Object(O["a"])(this,S,{writable:!0,value:void 0}),Object(O["a"])(this,D,{writable:!0,value:void 0}),Object(O["a"])(this,R,{writable:!0,value:void 0}),Object(O["a"])(this,T,{writable:!0,value:void 0}),Object(O["a"])(this,_,{writable:!0,value:void 0}),Object(O["a"])(this,A,{writable:!0,value:void 0}),Object(O["a"])(this,C,{writable:!0,value:void 0}),Object(j["a"])(this,A,new Set),Object(j["a"])(this,C,0),this.isShowLabel=!1,this.label=void 0,Object(j["a"])(this,T,i),Object(j["a"])(this,_,r),Object(j["a"])(this,D,o),Object(j["a"])(this,S,t),Object(j["a"])(this,R,this.createModal()),Object(j["a"])(this,x,this.create(i,n,a,o))}return Object(o["a"])(e,[{key:"toggleLabel",value:function(){this.isShowLabel=!this.isShowLabel,this.label.classList.toggle("show")}},{key:"create",value:function(e,t,n,a){var i,r=a;r.name="host",r.userData.segment=Object(g["a"])(this,S),r.userData.host=this;var o=new m["x"];o.name="hostGroup_".concat(e),o.add(r),Object(g["a"])(this,S).instance.add(o);var s=[];o.traverse((function(e){e.isMesh&&(e.material=e.material.clone(),s.push(e.material),e.userData.parent=o)}));var c=document.querySelector("#labels"),u=null===(i=document.querySelector(".hostInfoTemplate"))||void 0===i?void 0:i.cloneNode(!0);return u.classList.remove("hostInfoTemplate"),u.querySelector(".segment").textContent=Object(g["a"])(this,S).name,u.querySelector(".host").textContent=e,u.querySelector(".ip").textContent=this.ip,c.appendChild(u),o.position.set(t,0,n),o.userData={isHost:!0,segment:Object(g["a"])(this,S),host:this,label:u,materials:s},this.label=u,o}},{key:"createText",value:function(e){var t=this;y.load("https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json",(function(n){var a=new k["a"](e,{font:n,size:12,height:5,curveSegments:1,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelSegments:1}),i=new m["U"]({color:15990754,name:"text"}),r=new m["R"](a,i);r.name="hostText",r.position.set(.2,.4,0),r.rotation.x=-Math.PI/2,r.rotation.y=Math.PI/2,r.scale.multiplyScalar(.01),Object(g["a"])(t,x).add(r)}))}},{key:"createModal",value:function(){var e=new m["f"](4,8,.1),t=new m["S"]({color:new m["k"](0,255,0)}),n=new m["R"](e,t);n.rotation.y=Math.PI/2;var a=new m["x"];return a.add(n),y.load("https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json",(function(e){var t=new k["a"]("text",{font:e,size:12,height:5,curveSegments:1,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelSegments:1}),n=new m["U"]({color:0,name:"text"}),a=new m["R"](t,n);a.position.set(0,0,0),a.rotation.x=-Math.PI/2,a.rotation.y=Math.PI/2,a.scale.multiplyScalar(.01)})),a}},{key:"generateEvent",value:function(){var e=new m["xb"](.1,64,32),t=new m["S"]({color:16776960,name:"sphere"}),n=new m["R"](e,t);Object(g["a"])(this,x).add(n),this.addAnimateEvent(this.animateEvent,n)}},{key:"addAnimateEvent",value:function(e){var t="host_".concat(Object(g["a"])(this,T),"_Event_").concat(Object(g["a"])(this,C));Object(j["a"])(this,C,Object(g["a"])(this,C)+1),Object(g["a"])(this,A).add(t);for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];this.interactiveMap.elementsForAnimated[t]=e.bind.apply(e,[this,t].concat(a))()}},{key:"removeAnimateEvent",value:function(e){Object(g["a"])(this,A).delete(e),delete this.interactiveMap.elementsForAnimated[e]}},{key:"animateEvent",value:function(e,t){var n="up",a=this;return function(){"up"===n?(t.position.y+=.1,t.position.y>=.7&&(n="down")):"down"===n&&(t.position.y-=.01,t.position.y<=0&&(n="up",a.removeAnimateEvent(e)))}}},{key:"interactiveMap",get:function(){return Object(g["a"])(this,S).interactiveMap}},{key:"instance",get:function(){return Object(g["a"])(this,x)}},{key:"name",get:function(){return Object(g["a"])(this,T)}},{key:"ip",get:function(){return Object(g["a"])(this,_)}}]),e}(),P=n("5530"),z=n("b85c"),W=n("2909"),E=(n("4de4"),n("caad"),n("d81d"),n("7db0"),n("cb88")),U=n("9477"),Z=n("4818"),F=n("35cf"),G=n("0911"),L=n("e6e4"),H=n("a3b5"),N=n("1f60"),B=n("984f"),q=(new B["a"],new L["a"],new H["a"],new M["a"]),X=new WeakMap,$=new WeakMap,J=new WeakMap,V=new WeakMap,Y=new WeakMap,K=new WeakMap,Q=function(){function e(t,n,a,i,r){Object(s["a"])(this,e),Object(O["a"])(this,X,{writable:!0,value:void 0}),Object(O["a"])(this,$,{writable:!0,value:void 0}),Object(O["a"])(this,J,{writable:!0,value:void 0}),Object(O["a"])(this,V,{writable:!0,value:void 0}),Object(O["a"])(this,Y,{writable:!0,value:void 0}),Object(O["a"])(this,K,{writable:!0,value:void 0}),Object(j["a"])(this,$,[]),this.connections=[],Object(j["a"])(this,X,t),Object(j["a"])(this,Y,t),Object(j["a"])(this,V,this.create(t,n,a,r)),Object(j["a"])(this,K,i),this.createText(t)}return Object(o["a"])(e,[{key:"create",value:function(e,t,n,a){var i=new m["X"]({name:"segment_".concat(e),color:new m["k"]("#080808")}),r=new m["f"](b,p,w),o=new m["R"](r,i);o.rotation.x=-1.57,o.castShadow=!0,o.name="mainMesh";var s=new m["ib"](new m["k"]("gray"),.1,0,2),c=new m["x"];s.position.x-=2,s.position.z-=2,s.position.y=3,c.add(o),c.name="segmentGroup_".concat(e),c.position.set(t,w/2,n);var u=new m["e"];u.setFromObject(c);var l=[];return c.traverse((function(e){e.isMesh&&l.push(e.material)})),c.userData={isSegment:!0,boundingBox:u,materials:l},c}},{key:"createText",value:function(e){var t=this;q.load("https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json",(function(n){var a=new k["a"](e,{font:n,size:40,height:4,curveSegments:1,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelSegments:5}),i=new m["U"]({color:15990754,name:"text",side:m["q"]}),r=new m["R"](a,i);r.position.set(-1.8,.03,1.8),r.rotation.x=-Math.PI/2,r.scale.multiplyScalar(.01),Object(g["a"])(t,V).add(r),Object(j["a"])(t,J,r)}))}},{key:"createHost",value:function(e,t,n){var a=n.clone();a.position.x=0,a.position.y=0,a.position.z=0;var i=4,r=1,o=-1.5,s=-1.5,c=1.2,u=Math.floor(Object(g["a"])(this,$).length/i),l=o+Object(g["a"])(this,$).length%i*r,v=s+u*c,h=new I(this,l,v,e,t,a);return Object(g["a"])(this,V).add(h.instance),Object(g["a"])(this,$).push(h),h}},{key:"instance",get:function(){return Object(g["a"])(this,V)}},{key:"name",get:function(){return Object(g["a"])(this,Y)}},{key:"interactiveMap",get:function(){return Object(g["a"])(this,K)}},{key:"hosts",get:function(){return Object(g["a"])(this,$)}}]),e}(),ee=(new m["Db"],new WeakMap),te=new WeakMap,ne=function(){function e(t,n,a,i){Object(s["a"])(this,e),Object(O["a"])(this,ee,{writable:!0,value:void 0}),Object(O["a"])(this,te,{writable:!0,value:void 0}),Object(j["a"])(this,ee,t),Object(j["a"])(this,te,this.create(n,a,t,i))}return Object(o["a"])(e,[{key:"create",value:function(e,t,n,a){var i=a.clone(),r=new m["x"];r.add(i),r.name="routerGroup_".concat(n),r.position.set(e,0,t),r.scale.set(2,2,2);var o=[];r.traverse((function(e){e.isMesh&&(e.material=e.material.clone(),o.push(e.material))}));var s=new m["e"];return s.setFromObject(r),r.userData={isRouter:!0,boundingBox:s,materials:o},r}},{key:"instance",get:function(){return Object(g["a"])(this,te)}}]),e}(),ae=new m["k"]("#4e1a1a"),ie=(new L["a"],new H["a"],new m["Db"],new WeakMap),re=new WeakMap,oe=new WeakMap,se=new WeakMap,ce=new WeakMap,ue=new WeakMap,le=new WeakMap,ve=new WeakMap,he=new WeakMap,de=function(){function e(t,n,a){var i=this;Object(s["a"])(this,e),Object(O["a"])(this,ie,{writable:!0,value:void 0}),Object(O["a"])(this,re,{writable:!0,value:void 0}),Object(O["a"])(this,oe,{writable:!0,value:void 0}),Object(O["a"])(this,se,{writable:!0,value:void 0}),Object(O["a"])(this,ce,{writable:!0,value:void 0}),Object(O["a"])(this,ue,{writable:!0,value:void 0}),Object(O["a"])(this,le,{writable:!0,value:void 0}),Object(O["a"])(this,ve,{writable:!0,value:void 0}),Object(O["a"])(this,he,{writable:!0,value:void 0}),this.attackLines=[],Object(j["a"])(this,ce,new m["Ib"](90,.5,90)),Object(j["a"])(this,ue,[]),Object(j["a"])(this,le,[]),Object(j["a"])(this,ve,[]),this.connections=[],this.selectedObjects=[],this.objectsForOutline=[],this.raycaster=new m["pb"],this.mouse=new m["Hb"],Object(j["a"])(this,he,{}),Object(j["a"])(this,ie,new m["rb"]),Object(g["a"])(this,ie).background=new m["k"](10066329),this.canvas=a,this.rendererSize=t,Object(j["a"])(this,re,this.createCamera()),Object(j["a"])(this,oe,this.createWebGLRenderer(t.width,t.height,a)),Object(g["a"])(this,oe).domElement.style.touchAction="none",Object(g["a"])(this,oe).domElement.addEventListener("pointermove",(function(e){return i.onPointerMove(e)})),Object(g["a"])(this,oe).domElement.addEventListener("pointerdown",(function(e){return i.onPointerDown(e)})),Object(j["a"])(this,se,this.createLight(n.x,n.y,n.z)),Object(g["a"])(this,ie).add(Object(g["a"])(this,re)),this.createFloor(),this.initPostProcessing();var r=new G["a"](Object(g["a"])(this,re),Object(g["a"])(this,oe).domElement);r.minZoom=1,r.maxZoom=7,r.maxPolarAngle=.9*Math.PI/2.2,r.enablePan=!0,this.controls=r,this.render()}return Object(o["a"])(e,[{key:"connectRouterTo",value:function(e,t){var n,a,i,r=(null===e||void 0===e?void 0:e.position.x)||0,o=(null===e||void 0===e?void 0:e.position.z)||0,s=(null===t||void 0===t?void 0:t.position.x)||0,c=(null===t||void 0===t?void 0:t.position.z)||0,u=this.connections.filter((function(e){return(null===e||void 0===e?void 0:e.to.name)===t.name})).length+1;u=u>1?u:0;var l=(null===(n=e.getObjectByName("mainMesh"))||void 0===n||null===(a=n.geometry)||void 0===a||null===(i=a.parameters)||void 0===i?void 0:i.width)||0,v=new m["Ib"];e.userData.boundingBox.getSize(v);var h,d=Math.abs(r-s),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{x:r,z:o-Math.ceil(l/2)-e/2,direction:"up",size:e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{x:r-e/2-v.x/2,z:o,direction:"left",size:e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{x:r+e/2-v.x/2,z:o,direction:"right",size:e}};r<s?h="right":r>s&&(h="left");var w=[],O=.1,g=new m["Ib"];t.userData.boundingBox.getSize(g);var j=Math.abs(o-c)-g.x/2;switch(h){case"right":r===s&&w.push(b());var k=t.position.x-e.position.x-v.x/2,M=b(k);M.x+=v.x;var y=f(j);y.x=M.x+M.size/2,y.z=M.z-j/2,w.push(M),w.push(y);break;case"left":r===s&&w.push(p());var x=p(Math.abs(e.position.x-t.position.x-v.x/2)),S=f(j);S.x=t.position.x+u*O,S.z=x.z-j/2,x.x+=u*O,w.push(x),w.push(S);break;default:break}var D=this.createLine(w);this.connections.push({from:e,to:t,lines:D})}},{key:"createLine",value:function(e){var t,n=[];return e.forEach((function(e){var t,a=.1,i=.1,r=null!==(t=e.y)&&void 0!==t?t:0;["right","left"].includes(e.direction)?a=e.size:["up","down"].includes(e.direction)&&(i=e.size);var o=new m["X"]({color:e.color||"#0c0c80",visible:!e.animation,metalness:0}),s=new m["f"](a,.1,i,1,1,1),c=new m["R"](s,o);c.position.set(e.x,r,e.z),e.name&&(c.name=e.name),n.push({mesh:c,data:e})})),(t=Object(g["a"])(this,ie)).add.apply(t,Object(W["a"])(n.map((function(e){return e.mesh})))),n}},{key:"findConnections",value:function(e){}},{key:"createRouter",value:function(e,t,n,a){var i=new ne(e,t,n,a);return Object(g["a"])(this,ie).add(i.instance),Object(g["a"])(this,le).push(i),i.instance}},{key:"initPostProcessing",value:function(){this.composer=new E["a"](Object(g["a"])(this,oe)),this.composer.setSize(this.rendererSize.width,this.rendererSize.height);var e=new U["a"](Object(g["a"])(this,ie),Object(g["a"])(this,re));this.composer.addPass(e),this.outlinePass=new F["a"](new m["Hb"](window.innerWidth,window.innerHeight),Object(g["a"])(this,ie),Object(g["a"])(this,re)),this.outlinePass.visibleEdgeColor.set("#ff0000"),this.outlinePass.edgeThickness=1,this.outlinePass.edgeStrength=2,this.outlinePass.overlayMaterial.blending=m["l"],this.composer.addPass(this.outlinePass);var t=new Z["a"](N["a"]);this.composer.addPass(t)}},{key:"onPointerMove",value:function(e){!1!==e.isPrimary&&(this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.checkIntersection())}},{key:"onPointerDown",value:function(e){var t,n=this.selectedObjects,a=n.userData.parent;(n.userData.isHost||a)&&(null===(t=this.activeModal)||void 0===t||t.toggleLabel(),n.userData.isHost&&(this.activeModal=n.userData.host),a&&(this.activeModal=a.userData.host),this.activeModal.toggleLabel())}},{key:"checkIntersection",value:function(){this.raycaster.setFromCamera(this.mouse,Object(g["a"])(this,re));var e=this.raycaster.intersectObject(Object(g["a"])(this,ie),!0);if(0!=e.length&&(this.selectedObjects=e[0].object,this.outlinePass)){var t=this.selectedObjects.userData.parent;this.selectedObjects.userData.isHost&&(this.outlinePass.selectedObjects=[this.selectedObjects]),null!==t&&void 0!==t&&t.userData.isHost&&(this.outlinePass.selectedObjects=[this.selectedObjects.parent])}}},{key:"createSegment",value:function(e,t){var n=-9,a=-3,i=6,r=n+i*(Object(g["a"])(this,ue).length||0),o=new Q(e,r,a,this);return Object(g["a"])(this,ue).push(o),Object(g["a"])(this,ie).add(o.instance),o}},{key:"createHostsConnection",value:function(e,t){var n=new m["S"]({color:16711680,name:"hostsConnection"}),a=new m["f"](t,.5,.1),i=new m["R"](a,n);i.position.set(.5,1,-.45);var r=new m["xb"](.1,64,32),o=new m["S"]({color:16776960,name:"sphere"}),s=new m["R"](r,o);s.position.set(.2,1.5,-.1);var c=new m["x"];c.add(i),c.add(s),Object(g["a"])(this,ve).push({id:e,connection:i,sphere:s}),Object(g["a"])(this,ie).add(c)}},{key:"createCamera",value:function(){var e=window.innerWidth/window.innerHeight,t=10,n=new m["fb"](-t*e,t*e,t,-t,1,1e3);return n.position.set(20,20,20),n.rotation.order="YXZ",n.rotation.y=-Math.PI/4,n.rotation.x=Math.atan(-1/Math.sqrt(2)),n}},{key:"createWebGLRenderer",value:function(e,t,n){var a=new m["Lb"]({canvas:n,antialias:!0});return a.setPixelRatio(window.devicePixelRatio),a.setClearColor(16777215),a.outputEncoding=m["Mb"],a.shadowMap.enabled=!0,a.shadowMap.type=m["gb"],a.setSize(e,t),a}},{key:"createLight",value:function(e,t,n){var a=new m["b"](16777215,1),i=new m["o"](new m["k"]("white"),1),r=new m["o"](new m["k"]("white"),1),o=(new m["p"](i,5,new m["k"]("red")),new m["o"](new m["k"]("white"),1));new m["p"](o,5,new m["k"]("green"));return i.position.set(0,10,30),i.rotation.set(-80.5,0,0),r.position.set(5,10,30),r.rotation.set(-80.5,0,0),o.position.set(5,10,-30),o.rotation.set(80.5,0,0),Object(g["a"])(this,ie).add(i,r,o),Object(g["a"])(this,re).add(a),i}},{key:"createFloor",value:function(){var e=new m["X"]({name:"floor",color:new m["k"]("#434343"),metalness:0}),t=new m["R"](new m["f"](Object(g["a"])(this,ce).x,Object(g["a"])(this,ce).y,Object(g["a"])(this,ce).z),e);t.position.set(0,-Object(g["a"])(this,ce).y/2,0),Object(g["a"])(this,ie).add(t)}},{key:"render",value:function(){var e,t=this;for(var n in Object(g["a"])(this,he))Object(g["a"])(this,he)[n]();Object(g["a"])(this,ue).forEach((function(e){e.hosts.forEach((function(e){var n=new m["Ib"],a=e.instance;a.updateWorldMatrix(!0,!1),a.getWorldPosition(n),n.project(Object(g["a"])(t,re));var i=(.5*n.x+.5)*t.canvas.clientWidth,r=(-.5*n.y+.5)*t.canvas.clientHeight;a.userData.label.style.transform="translate(-50%, -50%) translate(".concat(i+40,"px,").concat(r-70,"px)")}))})),null===(e=this.composer)||void 0===e||e.render(),requestAnimationFrame((function(){return t.render()}))}},{key:"scene",get:function(){return Object(g["a"])(this,ie)}},{key:"camera",get:function(){return Object(g["a"])(this,re)}},{key:"renderer",get:function(){return Object(g["a"])(this,oe)}},{key:"light",get:function(){return Object(g["a"])(this,se)}},{key:"elementsForAnimated",get:function(){return Object(g["a"])(this,he)}},{key:"segments",get:function(){return Object(g["a"])(this,ue)}},{key:"attack",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,n){var a,i,r,o,s,c,u,l,v,h,d,f,m=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=m.length>2&&void 0!==m[2]&&m[2],i=m.length>3&&void 0!==m[3]?m[3]:"up",r=this.connections.find((function(e){return a?e.to.name===n&&e.from.name===t:e.from.name===n&&e.to.name===t})),o=0,s=Object(W["a"])(null===r||void 0===r?void 0:r.lines),c=a?s:s.reverse(),u=Object(z["a"])(c),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=19;break}return v=l.value,o++,h=Object(g["a"])(this,ie).getObjectByName(t),d=Object(g["a"])(this,ie).getObjectByName(n),f="test_".concat(o),e.next=17,this.createAttackAnimation(f,h,d,v.data,i);case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](7),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[7,21,24,27]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"createAttackAnimation",value:function(e,t,n,a){var i=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"up";return new Promise((function(o,s){var c,u=i.createLine([Object(P["a"])(Object(P["a"])({},a),{},{y:.05})]),l=u[0],v=l.mesh,h="down"==r?1:-1;v.material.color=ae,(c=i.attackLines).push.apply(c,Object(W["a"])(u)),["right","left"].includes(a.direction)?(v.scale.set(0,1,1),v.position.x=a.x-a.size/2):(v.scale.set(1,1,0),v.position.z=a.z-a.size/2*h),Object(g["a"])(i,he)[e]=function(){var r,s,c;"segmentGroup_Internet"==t.name&&(null===t||void 0===t||null===(r=t.userData.materials)||void 0===r||r.forEach((function(e){return e.color=ae})));["right","left"].includes(a.direction)?v.scale.x<1?(v.scale.x+=.01,v.position.x+=a.size/200):(delete Object(g["a"])(i,he)[e],null===n||void 0===n||null===(s=n.userData.materials)||void 0===s||s.forEach((function(e){return e.color=ae})),o("")):v.scale.z<1?(v.scale.z+=.01,v.position.z+=a.size/200*h):(delete Object(g["a"])(i,he)[e],null===n||void 0===n||null===(c=n.userData.materials)||void 0===c||c.forEach((function(e){return e.color=ae})),o(""))}}))}},{key:"fromInternetToRouter",value:function(){var e="segmentGroup_Internet",t="routerGroup_Router 1";return this.attack(e,t,!1,"down")}},{key:"fromRouterToDMZ",value:function(){var e="routerGroup_Router 1",t="segmentGroup_DMZ";return this.attack(e,t,!0)}},{key:"fromDMZToRouter",value:function(){var e="segmentGroup_DMZ",t="routerGroup_Router 2";return this.attack(e,t,!1,"down")}},{key:"fromRouterToDataCenter",value:function(){var e="routerGroup_Router 2",t="segmentGroup_Data Center";return this.attack(e,t,!0)}},{key:"fromDataCenterToRouter",value:function(){var e="segmentGroup_Data Center",t="routerGroup_Router 2";return this.attack(e,t)}},{key:"fromOfficeUserToRouter",value:function(){var e="segmentGroup_Office users",t="routerGroup_Router 2";return this.attack(e,t)}},{key:"fromRouterToOfficeUsers",value:function(){var e="routerGroup_Router 2",t="segmentGroup_Office users";return this.attack(e,t,!0)}},{key:"fromRouterToASU",value:function(){var e="routerGroup_Router 2",t="segmentGroup_ASU";return this.attack(e,t,!0)}},{key:"resetAttack",value:function(){var e=this;Object(j["a"])(this,he,{}),Object(g["a"])(this,ue).forEach((function(e){e.instance.userData.materials.forEach((function(e){return e.color=new m["k"]("#080808")}))})),Object(g["a"])(this,le).forEach((function(e){e.instance.userData.materials.forEach((function(e){return e.color=new m["k"]("#000000")}))})),this.attackLines.forEach((function(t){Object(g["a"])(e,ie).remove(t.mesh)})),this.attackLines=[]}}]),e}();var fe=n("ee65"),me=n("a1f7"),pe=(new m["Db"],new me["a"]),be=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.isStarted=!1,e.attackSegmentLines=[],e.attackHostLines=[],e.segmentFrom=0,e.segmentTo=1,e.segments=["Internet","DMZ","Data Center","Office users","ASU"],e.models={Internet1:{path:"Internet/Internet1",model:void 0},Internet2:{path:"Internet/Internet2",model:void 0},DMZ:{path:"DMZ/DMZ",model:void 0},DataCenter:{path:"DataCenter/DataCenter",model:void 0},OfficeUsers:{path:"OfficeUsers/OfficeUsers",model:void 0},ASU:{path:"ASU/ASU",model:void 0},router:{path:"router/router",model:void 0}},e}return Object(o["a"])(n,[{key:"swapSelects",value:function(){var e=this.segmentFrom;this.segmentFrom=this.segmentTo,this.segmentTo=e}},{key:"getModelForHost",value:function(e){var t={Internet:"Internet2",DMZ:"DMZ","Data Center":"DataCenter","Office users":"OfficeUsers",ASU:"ASU"};return t[e]}},{key:"mounted",value:function(){this.isStarted=!0,this.start(this.canvas)}},{key:"preloadModels",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(this.models);case 1:if((e.t1=e.t0()).done){e.next=11;break}return t=e.t1.value,n=this.models[t],e.next=6,pe.loadAsync("./models/".concat(n.path,".gltf"));case 6:a=e.sent,a.scene.scale.set(1.5,1.5,1.5),this.models[t].model=a.scene,e.next=1;break;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,r,o,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={width:window.innerWidth-20,height:window.innerHeight-20},a=new m["Ib"](10,10,-4),i=new de(n,a,t),e.next=5,this.preloadModels();case 5:return this.interactiveMap=i,r=[],o=[],fe.segments.forEach((function(e){var t,n=i.createSegment(e.name);r.push(n),null===(t=e.hosts)||void 0===t||t.forEach((function(t){var a=s.getModelForHost(e.name),i=s.models[a].model;n.createHost(t.name,t.ip,i)}))})),fe.routers.forEach((function(e){if(e.segments){var t=i.scene.getObjectByName("segmentGroup_".concat(e.segments.from)),n=(null===t||void 0===t?void 0:t.position.x)||0,a=(null===t||void 0===t?void 0:t.position.z)||0,r=3,c=5,u=n+r,l=a+c,v=i.createRouter(e.name,u,l,s.models.router.model);o.push(v),e.segments.to.forEach((function(e){var t=i.scene.getObjectByName("segmentGroup_".concat(e));i.connectRouterTo(v,t)})),i.connectRouterTo(v,t)}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startAttackSegment",value:function(){var e,t,n,a,i,r,o=this;if(this.interactiveMap&&void 0!==this.segmentTo&&void 0!==this.segmentFrom)switch(this.resetAttack(),this.segments[this.segmentFrom]){case"Internet":switch(this.segments[this.segmentTo]){case"DMZ":this.interactiveMap.fromInternetToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDMZ()}));break;case"Data Center":this.interactiveMap.fromInternetToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDMZ()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDataCenter()}));break;case"Office users":null===(e=this.interactiveMap)||void 0===e||e.fromInternetToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDMZ()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToOfficeUsers()}));break;case"ASU":null===(t=this.interactiveMap)||void 0===t||t.fromInternetToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDMZ()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToASU()}));break}break;case"DMZ":switch(this.segments[this.segmentTo]){case"Data Center":null===(n=this.interactiveMap)||void 0===n||n.fromDMZToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToDataCenter()}));break;case"Office users":null===(a=this.interactiveMap)||void 0===a||a.fromDMZToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToOfficeUsers()}));break;case"ASU":null===(i=this.interactiveMap)||void 0===i||i.fromDMZToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToASU()}));break}break;case"Data Center":switch(this.segments[this.segmentTo]){case"Office users":this.interactiveMap.fromDataCenterToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToOfficeUsers()}));break;case"ASU":this.interactiveMap.fromDataCenterToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToASU()}));break}break;case"Office users":switch(this.segments[this.segmentTo]){case"ASU":null===(r=this.interactiveMap)||void 0===r||r.fromOfficeUserToRouter().then((function(){var e;return null===(e=o.interactiveMap)||void 0===e?void 0:e.fromRouterToASU()}));break}break}}},{key:"startAttackHost",value:function(){var e,t=this;this.resetAttack();var n=this.interactiveMap.scene.getObjectByName("hostGroup_Administrator Workstation");null===(e=this.interactiveMap)||void 0===e||e.fromInternetToRouter().then((function(){var e;return null===(e=t.interactiveMap)||void 0===e?void 0:e.fromRouterToDMZ()})).then((function(){var e;return null===(e=t.interactiveMap)||void 0===e?void 0:e.fromDMZToRouter()})).then((function(){var e;return null===(e=t.interactiveMap)||void 0===e?void 0:e.fromRouterToOfficeUsers()})).then((function(){console.log(n),null===n||void 0===n||n.userData.materials.forEach((function(e){return e.color=new m["k"]("red")}))}))}},{key:"resetAttack",value:function(){var e;null===(e=this.interactiveMap)||void 0===e||e.resetAttack()}},{key:"addAttackAnimation",value:function(e,t,n,a){var i=this;if(this.interactiveMap){var r=0;this.interactiveMap.elementsForAnimated[e]=function(){var o,s;if(r>=n.length)return null===(s=i.interactiveMap)||void 0===s||delete s.elementsForAnimated[e],void(a.material.color=new m["k"]("red"));var c=null===(o=t[r])||void 0===o?void 0:o.animation;if(c){var u=n[r];if(u){u.material.visible||(u.material.visible=!0);var l=u.scale[c.direction];l<c.toScale&&(u.scale[c.direction]+=.1);var v=u.position[c.direction];"+"==c.method&&v<c.toPosition?u.position[c.direction]+=.05:"-"==c.method&&v>c.toPosition?u.position[c.direction]-=.05:r++}}}}}},{key:"isDisabled",value:function(e){return e<=this.segmentFrom}},{key:"checkSegmentTo",value:function(){void 0!==this.segmentTo&&this.segmentTo<=this.segmentFrom&&(this.segmentTo=void 0)}},{key:"canvas",get:function(){return this.$refs.canvas}}]),n}(v["b"]);be=Object(l["a"])([v["a"]],be);var we=be,Oe=we,ge=(n("9be9"),n("2877")),je=Object(ge["a"])(Oe,h,d,!1,null,null,null),ke=je.exports,Me=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n)}(v["b"]);Me=Object(l["a"])([Object(v["a"])({components:{TrainingInteractiveMap:ke}})],Me);var ye=Me,xe=ye,Se=Object(ge["a"])(xe,i,r,!1,null,"60b9b32e",null),De=Se.exports;n("3a62");a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(De)}}).$mount("#app")},ee65:function(e){e.exports=JSON.parse('{"segments":[{"name":"Internet","hosts":[{"name":"Kali","ip":"185.88.181.55"},{"name":"ProxyChecker","ip":"185.88.181.88"}]},{"name":"DMZ","hosts":[{"name":"CMS Drupal","ip":"10.10.1.20"},{"name":"Web Server 2","ip":"10.10.1.21"},{"name":"Appache Tomcat","ip":"10.10.1.24"},{"name":"Security Onion","ip":"\'10.10.1.25"}]},{"name":"Data Center","hosts":[{"name":"MS Active Directory","ip":"10.10.2.10"},{"name":"MS Exchange","ip":"10.10.2.11"},{"name":"MS FileServer","ip":"10.10.2.12"},{"name":"Database Server","ip":"10.10.2.13"},{"name":"SSH Server","ip":"10.10.2.14"},{"name":"Redmine Server","ip":"10.10.2.15"},{"name":"CMS Made Simple","ip":"10.10.2.16"},{"name":"ViPNet IDS HS","ip":"10.10.2.17"},{"name":"ViPNet IDS NS","ip":"10.10.2.21"},{"name":"ViPNet TIAS","ip":"10.10.2.23"}]},{"name":"Office users","hosts":[{"name":"Administrator Workstation","ip":"10.10.4.10"},{"name":"Manager Workstation 1","ip":"10.10.4.11"},{"name":"Response Team Workstation","ip":"10.10.4.12"},{"name":"Insider Workstation","ip":"10.10.4.17"},{"name":"Developer Workstation","ip":"10.10.4.13"},{"name":"Manager Workstation 2","ip":"10.10.4.14"}]},{"name":"ASU","hosts":[{"name":"SCADA IGSS","ip":"10.10.3.10"}]}],"routers":[{"name":"Router 1","segments":{"from":"Internet","to":["DMZ"]}},{"name":"Router 2","x":-6,"z":2,"segments":{"from":"DMZ","to":["Data Center","Office users","ASU"]}}]}')},f44c:function(e,t,n){}});
//# sourceMappingURL=app.6e154f2e.js.map