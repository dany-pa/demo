{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/textures/router.png","webpack:///./src/App.vue?3c1c","webpack:///./src/interactiveMap/const.js","webpack:///./src/interactiveMap/Host.js","webpack:///./src/interactiveMap/Segment.js","webpack:///./src/interactiveMap/Router.js","webpack:///./src/interactiveMap/InteractiveMap.js","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/textures/host.jpg","webpack:///./src/App.vue?7ed0","webpack:///./src/textures/floor.png","webpack:///./src/textures/segment.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","isStarted","_e","on","start","_v","staticClass","ref","_m","directives","rawName","expression","$event","$$selectedVal","Array","filter","target","options","selected","map","val","_value","segmentFrom","multiple","checkSegmentTo","segmentTo","isDisabled","startAttackSegment","startAttackHost","staticRenderFns","SEGMENT_HEIGHT","SEGMENT_WIDTH","SEGMENT_DEPTH","HOST_WIDTH","HOST_HEIGHT","HOST_DEPTH","fontLoader","FontLoader","Host","texture","segment","x","z","text","ip","Set","createModal","createText","hostMaterial","MeshStandardMaterial","host","BoxGeometry","hostMesh","Mesh","castShadow","userData","_modal","hostGroup","Group","add","instance","position","set","load","font","geometry","TextGeometry","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelSegments","material","MeshLambertMaterial","color","textMesh","rotation","Math","PI","y","scale","multiplyScalar","modalGeometry","modalMaterial","MeshBasicMaterial","Color","modalMesh","modalGroup","sphereGeometry","SphereGeometry","sphereMaterial","sphere","addAnimateEvent","animateEvent","fn","eventId","args","interactiveMap","elementsForAnimated","delete","direction","removeAnimateEvent","textureLoader","TextureLoader","Segment","id","segmentTexture","segmentMaterial","segmentMesh","segmentGroup","side","DoubleSide","Router","routerTexture","offset","Vector2","wrapS","RepeatWrapping","wrapT","magFilter","NearestFilter","repeat","plane","planeGroup","InteractiveMap","rendererSize","lightPositions","canvas","hostHUD","Raycaster","Scene","background","createCamera","createWebGLRenderer","width","createLight","createFloor","initPostProcessing","controls","OrbitControls","domElement","minZoom","maxZoom","maxPolarAngle","enablePan","render","lines","linesMeshes","forEach","line","lineMaterial","visible","animation","depth","mesh","router","composer","EffectComposer","renderPass","RenderPass","addPass","outlinePass","OutlinePass","innerWidth","innerHeight","visibleEdgeColor","hiddenEdgeColor","edgeThickness","edgeStrength","effectFXAA","ShaderPass","FXAAShader","uniforms","style","touchAction","addEventListener","event","onPointerMove","onPointerDown","isPrimary","mouse","clientX","clientY","checkIntersection","selectedObjects","el","modal","activeModal","raycaster","setFromCamera","intersects","intersectObject","selectedObject","addHost","parent","children","find","segmentName","querySelector","textContent","hostName","hostIP","hostConnectionMaterial","hostConnection","hostConnectionMesh","connectionGroup","connection","aspect","camera","OrthographicCamera","order","atan","sqrt","renderer","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","shadowMap","enabled","type","PCFSoftShadowMap","setSize","light","DirectionalLight","bg","floorMaterial","floor","console","log","requestAnimationFrame","attackSegmentLines","attackHostLines","mounted","methods","rendererSizes","internetSegment","DMZSegment","DataCenterSegment","OfficeUsersSegment","ASUSegment","toScale","toPosition","method","linesData","attackLines","addAttackAnimation","animationName","lineData","curPosition","animateStep","segmentIndex","computed","component","Vue","config","productionTip","h","App","$mount"],"mappings":"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kBACA,eACA,GACA,EACA,gBAEA,qCAiUM,OAvTA1B,QAANA,iBACQjE,EAARA,YACQA,EAARA,YACQA,EAARA,kBACQuM,EAARA,WACAvM,EACA,QACA,KACA,IACA,OACA,iBAEQuM,EAARA,WACAvM,EACA,eACA,GACA,IACA,iBACA,iBAGQwM,EAARA,WACAxM,EACA,cACA,KACA,IACA,eACA,cAEQwM,EAARA,WACAxM,EACA,eACA,GACA,IACA,iBACA,cAEQwM,EAARA,WACAxM,EACA,iBACA,KACA,IACA,mBACA,cAEQwM,EAARA,WACAxM,EACA,kBACA,IACA,EACA,mBACA,cAGQyM,EAARA,WACAzM,EACA,uBACA,KACA,IACA,wBACA,cAEQyM,EAARA,WACAzM,EACA,cACA,GACA,IACA,gBACA,cAEQyM,EAARA,WACAzM,EACA,gBACA,KACA,IACA,kBACA,cAEQyM,EAARA,WACAzM,EACA,mBACA,KACA,GACA,oBACA,cAEQyM,EAARA,WACAzM,EACA,aACA,GACA,GACA,eACA,cAEQyM,EAARA,WACAzM,EACA,iBACA,KACA,GACA,mBACA,cAEQyM,EAARA,WACAzM,EACA,mBACA,IACA,GACA,oBACA,cAEQyM,EAARA,WACAzM,EACA,gBACA,EACA,GACA,kBACA,cAEQyM,EAARA,WACAzM,EACA,gBACA,IACA,GACA,kBACA,cAEQyM,EAARA,WACAzM,EACA,cACA,IACA,IACA,gBACA,cAGQ0M,EAARA,WACA1M,EACA,6BACA,KACA,IACA,8BACA,cAEQ0M,EAARA,WACA1M,EACA,wBACA,GACA,IACA,0BACA,cAEQ0M,EAARA,WACA1M,EACA,4BACA,KACA,IACA,8BACA,cAEQ0M,EAARA,WACA1M,EACA,uBACA,IACA,EACA,sBACA,cAEQ0M,EAARA,WACA1M,EACA,wBACA,EACA,EACA,0BACA,cAEQ0M,EAARA,WACA1M,EACA,wBACA,IACA,EACA,0BACA,cAGQ2M,EAARA,WACA3M,EACA,cACA,KACA,IACA,eACA,cAGA,+BACA,8BAEQ,EAAR,2BACA,CACUE,GAAVA,IA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","file":"js/app.224b63a9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/router.d06ce6ef.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isStarted)?_c('button',{on:{\"click\":_vm.start}},[_vm._v(\"START\")]):_vm._e(),_c('div',{staticClass:\"mapContainer\"},[_c('canvas',{ref:\"canvas\",staticClass:\"canvas\"}),_c('div',{ref:\"hostHUD\",staticClass:\"hostHUD\"},[_vm._m(0),_vm._m(1),_vm._m(2)]),_c('div',{staticClass:\"attack\"},[_vm._v(\" Атака из сегмента: \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.segmentFrom),expression:\"segmentFrom\"}],attrs:{\"name\":\"segmentFrom\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.segmentFrom=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.checkSegmentTo]}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"Internet\")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"DMZ\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"Data Center\")]),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"Office users\")]),_c('option',{attrs:{\"value\":\"4\"}},[_vm._v(\"ASU\")])]),_c('br'),_vm._v(\" в сегмент: \"),_c('br'),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.segmentTo),expression:\"segmentTo\"}],attrs:{\"name\":\"segmentFrom\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.segmentTo=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\",\"disabled\":_vm.isDisabled(0)}},[_vm._v(\"Internet\")]),_c('option',{attrs:{\"value\":\"1\",\"disabled\":_vm.isDisabled(1)}},[_vm._v(\"DMZ\")]),_c('option',{attrs:{\"value\":\"2\",\"disabled\":_vm.isDisabled(2)}},[_vm._v(\"Data Center\")]),_c('option',{attrs:{\"value\":\"3\",\"disabled\":_vm.isDisabled(3)}},[_vm._v(\"Office users\")]),_c('option',{attrs:{\"value\":\"4\",\"disabled\":_vm.isDisabled(4)}},[_vm._v(\"ASU\")])]),_c('br'),_c('br'),_c('button',{ref:\"startAttack\",on:{\"click\":_vm.startAttackSegment}},[_vm._v(\" Начать атаку на сегмент \")]),_c('br'),_c('br'),_c('button',{ref:\"startAttack\",on:{\"click\":_vm.startAttackHost}},[_vm._v(\" Начать атаку на хост \")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Сегмент: \"),_c('strong',{staticClass:\"segmentName\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Хост: \"),_c('strong',{staticClass:\"hostName\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"IP хоста: \"),_c('strong',{staticClass:\"hostIP\"})])}]\n\nexport { render, staticRenderFns }","export const SEGMENT_HEIGHT = 4;\r\nexport const SEGMENT_WIDTH = 4;\r\nexport const SEGMENT_DEPTH = 0.1;\r\nexport const HOST_WIDTH = 0.5;\r\nexport const HOST_HEIGHT = 1;\r\nexport const HOST_DEPTH = 0.5;","import {\r\n    BoxGeometry,\r\n    Group,\r\n    Mesh,\r\n    MeshLambertMaterial,\r\n    TextureLoader,\r\n    MeshStandardMaterial,\r\n    MeshBasicMaterial,\r\n    Color,\r\n    SphereGeometry,\r\n} from 'three';\r\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\r\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\r\nimport { HOST_WIDTH, HOST_HEIGHT, HOST_DEPTH, SEGMENT_DEPTH } from './const';\r\nconst fontLoader = new FontLoader();\r\n\r\nexport class Host {\r\n    #instance;\r\n    #textInstance;\r\n    #segment;\r\n    #texture;\r\n    #modal;\r\n    #name;\r\n    #ip;\r\n    #animateEvents = new Set();\r\n    #animateEventsCount = 0;\r\n\r\n    constructor(\r\n        texture,\r\n        segment,\r\n        name,\r\n        x,\r\n        z,\r\n        text,\r\n        ip\r\n    ) {\r\n        this.#name = name;\r\n        this.#ip = ip;\r\n        this.#texture = texture;\r\n        this.#segment = segment;\r\n        this.#modal = this.createModal();\r\n        this.#instance = this.create(name, x, z);\r\n        this.createText(text);\r\n    }\r\n\r\n    create(name, x, z) {\r\n        const hostMaterial = new MeshStandardMaterial({\r\n            name: `host_${name}`,\r\n            map: this.#texture,\r\n        });\r\n\r\n        const host = new BoxGeometry(\r\n            HOST_WIDTH,\r\n            HOST_HEIGHT,\r\n            HOST_DEPTH\r\n        );\r\n\r\n        const hostMesh = new Mesh(host, hostMaterial);\r\n        hostMesh.castShadow = true;\r\n        hostMesh.name = 'host';\r\n        hostMesh.userData._modal = this.#modal\r\n        hostMesh.userData.segment = this.#segment\r\n        hostMesh.userData.host = this\r\n        \r\n        const hostGroup = new Group();\r\n        hostGroup.add(hostMesh);\r\n        \r\n        this.#segment.instance.add(hostGroup);\r\n        hostGroup.position.set(x, HOST_DEPTH + SEGMENT_DEPTH, z);\r\n        return hostGroup;\r\n    }\r\n\r\n    createText(text) {\r\n        fontLoader.load(\r\n            'https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json',\r\n            (font) => {\r\n                const geometry = new TextGeometry(text, {\r\n                    font: font,\r\n                    size: 12,\r\n                    height: 5,\r\n                    curveSegments: 1,\r\n                    bevelEnabled: true,\r\n                    bevelThickness: 1,\r\n                    bevelSize: 1,\r\n                    bevelSegments: 1,\r\n                });\r\n\r\n                let material = new MeshLambertMaterial({\r\n                    color: 0xf3ffe2,\r\n                    name: 'text',\r\n                });\r\n\r\n                const textMesh = new Mesh(geometry, material);\r\n                textMesh.name = 'hostText';\r\n                textMesh.position.set(0.2, 0.4, 0);\r\n                textMesh.rotation.x = -Math.PI / 2;\r\n                textMesh.rotation.y = Math.PI / 2;\r\n                textMesh.scale.multiplyScalar(0.01);\r\n                this.#textInstance = textMesh;\r\n                this.#instance.add(textMesh);\r\n            }\r\n        );\r\n    }\r\n\r\n    createModal(){\r\n        const modalGeometry = new BoxGeometry(4, 8, 0.1);\r\n        const modalMaterial = new MeshBasicMaterial({\r\n            color: new Color(0,255,0),\r\n        });\r\n        const modalMesh = new Mesh(modalGeometry, modalMaterial);\r\n        modalMesh.rotation.y = Math.PI / 2;\r\n\r\n        const modalGroup = new Group()\r\n        modalGroup.add(modalMesh)\r\n\r\n        fontLoader.load(\r\n            'https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json',\r\n            (font) => {\r\n                const geometry= new TextGeometry('test', {\r\n                    font: font,\r\n                    size: 12,\r\n                    height: 5,\r\n                    curveSegments: 1,\r\n                    bevelEnabled: true,\r\n                    bevelThickness: 1,\r\n                    bevelSize: 1,\r\n                    bevelSegments: 1,\r\n                });\r\n\r\n                let material = new MeshLambertMaterial({\r\n                    // color: 0xf3ffe2,\r\n                    color: 0x000000,\r\n                    name: 'text',\r\n                });\r\n\r\n                const textMesh = new Mesh(geometry, material);\r\n                textMesh.position.set(0,0,0);\r\n                textMesh.rotation.x = -Math.PI / 2;\r\n                textMesh.rotation.y = Math.PI / 2;\r\n                textMesh.scale.multiplyScalar(0.01);\r\n                // modalGroup.add(textMesh)\r\n            },\r\n        );\r\n\r\n        return modalGroup\r\n    }\r\n\r\n    generateEvent(){\r\n        const sphereGeometry = new SphereGeometry(0.1, 64, 32);\r\n        const sphereMaterial = new MeshBasicMaterial({\r\n            color: 0xffff00,\r\n            name: 'sphere',\r\n        });\r\n        const sphere = new Mesh(sphereGeometry, sphereMaterial);\r\n        this.#instance.add(sphere)\r\n        this.addAnimateEvent(this.animateEvent, sphere)\r\n    }\r\n\r\n    addAnimateEvent(fn, ...args){\r\n        const eventId = `host_${this.#name}_Event_${this.#animateEventsCount}`\r\n        this.#animateEventsCount += 1;\r\n        this.#animateEvents.add(eventId)\r\n        this.interactiveMap.elementsForAnimated[eventId] = fn.bind(this, eventId, ...args)()\r\n    }\r\n\r\n    removeAnimateEvent(eventId){\r\n        this.#animateEvents.delete(eventId)\r\n        delete this.interactiveMap.elementsForAnimated[eventId]\r\n    }\r\n\r\n    animateEvent(eventId, sphere){\r\n        let direction = \"up\"\r\n        const host = this;\r\n        return () => {\r\n            if (direction == \"up\"){\r\n                sphere.position.y += 0.1;\r\n                if (sphere.position.y >= 0.7){\r\n                    direction = \"down\"\r\n                }\r\n            } else if (direction == \"down\"){\r\n                sphere.position.y -= 0.01;\r\n                if (sphere.position.y <= 0){\r\n                    direction = \"up\"\r\n                    host.removeAnimateEvent(eventId)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get interactiveMap(){\r\n        return this.#segment.interactiveMap;\r\n    }\r\n    \r\n\r\n    get instance() {\r\n        return this.#instance;\r\n    }\r\n\r\n    get name(){\r\n        return this.#name;\r\n    }\r\n\r\n    get ip(){\r\n        return this.#ip;\r\n    }\r\n\r\n}\r\n","import segmentTexture from '../textures/segment.png';\r\nimport {\r\n    BoxGeometry,\r\n    Color,\r\n    DoubleSide,\r\n    Group,\r\n    Mesh,\r\n    MeshLambertMaterial,\r\n    MeshStandardMaterial,\r\n    TextureLoader,\r\n} from 'three';\r\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\r\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\r\nimport { SEGMENT_WIDTH, SEGMENT_HEIGHT, SEGMENT_DEPTH } from './const';\r\nimport { Host } from './Host';\r\n\r\nconst textureLoader = new TextureLoader();\r\nconst fontLoader = new FontLoader();\r\n\r\nexport class Segment {\r\n    #id;\r\n    #hosts= [];\r\n    #textInstance;\r\n    #instance;\r\n    #name;\r\n    #interactiveMap;\r\n\r\n    constructor(id, x, z, text, interactiveMap) {\r\n        this.#id = id;\r\n        this.#name = text;\r\n        this.#instance = this.create(id, x, z);\r\n        this.#interactiveMap = interactiveMap;\r\n        this.createText(text);\r\n    }\r\n\r\n    create(id, x, z) {\r\n        const texture = textureLoader.load(segmentTexture)\r\n        const segmentMaterial = new MeshStandardMaterial({\r\n            name: `segment_${id}`,\r\n            map: texture,\r\n            name: 'segmentMaterial'\r\n        });\r\n        const segment = new BoxGeometry(\r\n            SEGMENT_WIDTH,\r\n            SEGMENT_HEIGHT,\r\n            SEGMENT_DEPTH\r\n        );\r\n        const segmentMesh = new Mesh(segment, segmentMaterial);\r\n        segmentMesh.rotation.x = -1.57;\r\n        segmentMesh.castShadow = true;\r\n        segmentMesh.name = 'segmentMesh'\r\n        const segmentGroup = new Group();\r\n\r\n        segmentGroup.add(segmentMesh);\r\n        segmentGroup.name = 'segmentGroup'\r\n\r\n        segmentGroup.position.set(x, SEGMENT_DEPTH / 2, z);\r\n        return segmentGroup;\r\n    }\r\n\r\n    createText(text) {\r\n        fontLoader.load(\r\n            'https://cdn.rawgit.com/mrdoob/three.js/master/examples/fonts/helvetiker_regular.typeface.json',\r\n            (font) => {\r\n                const geometry = new TextGeometry(text, {\r\n                    font: font,\r\n                    size: 40,\r\n                    height: 4,\r\n                    curveSegments: 1,\r\n                    bevelEnabled: true,\r\n                    bevelThickness: 1,\r\n                    bevelSize: 1,\r\n                    bevelSegments: 5,\r\n                });\r\n\r\n                let material = new MeshLambertMaterial({\r\n                    color: 0xf3ffe2,\r\n                    name: 'text',\r\n                    side: DoubleSide,\r\n                });\r\n\r\n                const textMesh = new Mesh(geometry, material);\r\n                textMesh.position.set(-1.8, 0, 1.8);\r\n                textMesh.rotation.x = -Math.PI / 2;\r\n                textMesh.scale.multiplyScalar(0.01);\r\n\r\n                this.#instance.add(textMesh);\r\n                this.#textInstance = textMesh;\r\n            }\r\n        );\r\n    }\r\n\r\n    createHost(texture, id, x, z, text, ip) {\r\n        const host = new Host(texture, this, id, x, z, text, ip);\r\n        this.#instance.add(host.instance);\r\n        this.#hosts.push(host);\r\n        return host;\r\n    }\r\n\r\n    get instance() {\r\n        return this.#instance;\r\n    }\r\n\r\n    get name(){\r\n        return this.#name;\r\n    }\r\n\r\n    get interactiveMap(){\r\n        return this.#interactiveMap;\r\n    }\r\n\r\n    get hosts(){\r\n        return this.#hosts;\r\n    }\r\n}\r\n","\r\nimport routerTexture from \"../textures/router.png\"\r\nimport {\r\n    DoubleSide,\r\n    Mesh,\r\n    Group,\r\n    BoxGeometry,\r\n    MeshStandardMaterial,\r\n    TextureLoader,\r\n    RepeatWrapping,\r\n    Vector2,\r\n    NearestFilter,\r\n} from 'three';\r\n\r\nconst textureLoader = new TextureLoader();\r\n\r\nexport class Router {\r\n    #id;\r\n    #instance;\r\n\r\n    constructor(id, x, z) {\r\n        this.#id = id;\r\n        this.create(x, z);\r\n    }\r\n\r\n    create(x, z) {\r\n        const geometry = new BoxGeometry(3, 3, 0.1);\r\n        const texture = textureLoader.load(routerTexture);\r\n        texture.rotation = -0.8\r\n        texture.offset = new Vector2(0.5,-0)\r\n        texture.wrapS = RepeatWrapping;\r\n        texture.wrapT = RepeatWrapping;\r\n        texture.magFilter = NearestFilter;\r\n        // texture.needsUpdate = true;\r\n        texture.repeat.x = 0.7;\r\n        texture.repeat.y = 0.7;\r\n        const material = new MeshStandardMaterial({\r\n            // color: 0xffdd00,\r\n            side: DoubleSide,\r\n            map: texture\r\n        });\r\n        const plane = new Mesh(geometry, material);\r\n        plane.position.set(x, 0.01, z);\r\n        plane.rotation.x = Math.PI / 2;\r\n        plane.rotation.z = Math.PI / 4;\r\n        const planeGroup = new Group();\r\n        planeGroup.add(plane);\r\n        this.#instance = planeGroup;\r\n    }\r\n\r\n    get instance() {\r\n        return this.#instance;\r\n    }\r\n}\r\n","import bg from '../textures/floor.png';\r\n// import GUI from 'lil-gui';\r\nimport {\r\n    WebGLRenderer,\r\n    PCFSoftShadowMap,\r\n    PointLight,\r\n    Scene,\r\n    MeshBasicMaterial,\r\n    Mesh,\r\n    TextureLoader,\r\n    BoxGeometry,\r\n    SphereGeometry,\r\n    Group,\r\n    Vector2,\r\n    RepeatWrapping,\r\n    Color,\r\n    DirectionalLight,\r\n    OrthographicCamera,\r\n    NearestFilter,\r\n    DirectionalLightHelper,\r\n    MeshStandardMaterial,\r\n    Raycaster,\r\n    PlaneGeometry,\r\n    Material,\r\n    CanvasTexture,\r\n    Texture,\r\n    SpriteMaterial,\r\n    Sprite,\r\n    TubeGeometry,\r\n    Curve,\r\n    Vector3,\r\n} from 'three';\r\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from 'three.meshline';\r\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\r\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass.js';\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\n\r\nimport { Segment } from './Segment';\r\nimport { Router } from './Router';\r\n\r\nconst fontLoader = new FontLoader();\r\nconst textureLoader = new TextureLoader();\r\n\r\nexport class InteractiveMap {\r\n    #scene;\r\n    #camera;\r\n    #renderer;\r\n    #light;\r\n    #floorSize = { x: 90, y: 0.5, z: 90 };\r\n    #segments = [];\r\n    #hostsConnections = [];\r\n    outlinePass;\r\n    #gui;\r\n    selectedObjects = [];\r\n    raycaster = new Raycaster();\r\n    mouse = new Vector2();\r\n    composer;\r\n    activeModal;\r\n    rendererWidth;\r\n    rendererHeight;\r\n    #hostHUD;\r\n    controls;\r\n    #elementsForAnimated = {};\r\n    constructor(rendererSize, lightPositions, canvas, hostHUD) {\r\n        // this.#gui = new GUI();\r\n        this.#scene = new Scene();\r\n        this.#scene.background = new Color(0x999999);\r\n        this.#hostHUD = hostHUD;\r\n\r\n        this.#camera = this.createCamera();\r\n\r\n        this.#renderer = this.createWebGLRenderer(\r\n            rendererSize.width,\r\n            rendererSize.height,\r\n            canvas\r\n        );\r\n\r\n        this.#light = this.createLight(\r\n            lightPositions.x,\r\n            lightPositions.y,\r\n            lightPositions.z\r\n        );\r\n\r\n        this.#scene.add(this.#camera);\r\n\r\n        this.createFloor();\r\n\r\n        this.initPostProcessing();\r\n\r\n        let controls = new OrbitControls(\r\n            this.#camera,\r\n            this.#renderer.domElement\r\n        );\r\n        controls.minZoom = 1;\r\n        controls.maxZoom = 7;\r\n        controls.maxPolarAngle = (0.9 * Math.PI) / 2.2;\r\n        controls.enablePan = true;\r\n        this.controls = controls;\r\n\r\n        this.render();\r\n    }\r\n\r\n    createLine(lines) {\r\n        let linesMeshes = [];\r\n        lines.forEach((line) => {\r\n            const lineMaterial = new MeshStandardMaterial({\r\n                color: line.color || 'blue',\r\n                visible: !line.animation\r\n            });\r\n            const geometry = new BoxGeometry(\r\n                line.width,\r\n                line.height,\r\n                line.depth,\r\n                1,\r\n                1,\r\n                1\r\n            );\r\n            const mesh = new Mesh(geometry, lineMaterial);\r\n            mesh.position.set(line.x, line.y, line.z);\r\n            linesMeshes.push(mesh);\r\n        });\r\n        this.#scene.add(...linesMeshes);\r\n\r\n        return linesMeshes;\r\n    }\r\n\r\n    createRouter(id, x, z) {\r\n        const router = new Router(id, x, z);\r\n        this.#scene.add(router.instance);\r\n    }\r\n\r\n    initPostProcessing() {\r\n        this.composer = new EffectComposer(this.#renderer);\r\n\r\n        const renderPass = new RenderPass(this.#scene, this.#camera);\r\n        this.composer.addPass(renderPass);\r\n\r\n        this.outlinePass = new OutlinePass(\r\n            new Vector2(window.innerWidth, window.innerHeight),\r\n            this.#scene,\r\n            this.#camera\r\n        );\r\n        this.outlinePass.visibleEdgeColor = new Color(255, 0, 0);\r\n        this.outlinePass.hiddenEdgeColor = new Color(255, 0, 0);\r\n        this.outlinePass.edgeThickness = 1;\r\n        this.outlinePass.edgeStrength = 10;\r\n        this.composer.addPass(this.outlinePass);\r\n\r\n        const effectFXAA = new ShaderPass(FXAAShader);\r\n        effectFXAA.uniforms['resolution'].value.set(\r\n            1 / window.innerWidth,\r\n            1 / window.innerHeight\r\n        );\r\n        this.composer.addPass(effectFXAA);\r\n\r\n        this.#renderer.domElement.style.touchAction = 'none';\r\n        this.#renderer.domElement.addEventListener('pointermove', (event) =>\r\n            this.onPointerMove(event)\r\n        );\r\n        this.#renderer.domElement.addEventListener('pointerdown', (event) =>\r\n            this.onPointerDown(event)\r\n        );\r\n    }\r\n\r\n    onPointerMove(event) {\r\n        if (event.isPrimary === false) return;\r\n        this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n        this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n\r\n        this.checkIntersection();\r\n    }\r\n\r\n    onPointerDown(event) {\r\n        if (event.isPrimary === false || this.selectedObjects.length === 0)\r\n            return;\r\n        const el = this.selectedObjects[0];\r\n        const modal = el.userData._modal;\r\n        // if (this.activeModal){\r\n        //     this.#scene.remove(this.activeModal.children[0])\r\n        //     this.#scene.remove(this.activeModal)\r\n        //     el.parent.remove(this.activeModal.children[0])\r\n        //     el.parent.remove(this.activeModal)\r\n        // }\r\n        this.activeModal = modal;\r\n        // @ts-ignore\r\n        // el.parent.add(modal)\r\n    }\r\n\r\n    checkIntersection() {\r\n        this.raycaster.setFromCamera(this.mouse, this.#camera);\r\n\r\n        const intersects = this.raycaster.intersectObject(this.#scene, true);\r\n\r\n        if (intersects.length > 0) {\r\n            const selectedObject = intersects[0].object;\r\n            this.addHost(selectedObject);\r\n            this.outlinePass.selectedObjects = this.selectedObjects;\r\n        } else {\r\n            // outlinePass.selectedObjects = [];\r\n        }\r\n    }\r\n\r\n    addHost(object) {\r\n        this.selectedObjects = [];\r\n        if (object.name == 'hostText') {\r\n            const host = object.parent.children.find((el) => el.name == 'host');\r\n            //@ts-ignore\r\n            this.selectedObjects.push(host);\r\n        } else if (object.name == 'host') {\r\n            //@ts-ignore\r\n            this.selectedObjects.push(object);\r\n        }\r\n\r\n        if (this.selectedObjects.length > 0) {\r\n            const segmentName = this.selectedObjects[0].userData.segment.name;\r\n            this.#hostHUD.querySelector('.segmentName').textContent =\r\n                segmentName;\r\n\r\n            const hostName = this.selectedObjects[0].userData.host.name;\r\n            this.#hostHUD.querySelector('.hostName').textContent = hostName;\r\n\r\n            const hostIP = this.selectedObjects[0].userData.host.ip;\r\n            this.#hostHUD.querySelector('.hostIP').textContent = hostIP;\r\n        } else {\r\n            this.#hostHUD.querySelector('.segmentName').textContent = '';\r\n\r\n            this.#hostHUD.querySelector('.hostName').textContent = '';\r\n\r\n            this.#hostHUD.querySelector('.hostIP').textContent = '';\r\n        }\r\n    }\r\n\r\n    createSegment(id, x, z, text) {\r\n        const segment = new Segment(id, x, z, text, this);\r\n        this.#segments.push(segment);\r\n        this.#scene.add(segment.instance);\r\n        return segment;\r\n    }\r\n\r\n    createHostsConnection(id, length) {\r\n        const hostConnectionMaterial = new MeshBasicMaterial({\r\n            color: 0xff0000,\r\n            name: 'hostsConnection',\r\n        });\r\n        // TODO: Написать автоматическое вычисление длины между двумя хостами, и передавать в функцию два хоста, между которыми надо сделать соединение\r\n        const hostConnection = new BoxGeometry(length, 0.5, 0.1);\r\n        const hostConnectionMesh = new Mesh(\r\n            hostConnection,\r\n            hostConnectionMaterial\r\n        );\r\n        hostConnectionMesh.position.set(0.5, 1, -0.45);\r\n\r\n        // Создаем шар для анимации активного соединения\r\n        const sphereGeometry = new SphereGeometry(0.1, 64, 32);\r\n        const sphereMaterial = new MeshBasicMaterial({\r\n            color: 0xffff00,\r\n            name: 'sphere',\r\n        });\r\n        const sphere = new Mesh(sphereGeometry, sphereMaterial);\r\n        sphere.position.set(0.2, 1.5, -0.1);\r\n\r\n        const connectionGroup = new Group();\r\n        connectionGroup.add(hostConnectionMesh);\r\n        connectionGroup.add(sphere);\r\n\r\n        this.#hostsConnections.push({\r\n            id: id,\r\n            connection: hostConnectionMesh,\r\n            sphere: sphere,\r\n        });\r\n\r\n        this.#scene.add(connectionGroup);\r\n    }\r\n\r\n    createCamera() {\r\n        const aspect = window.innerWidth / window.innerHeight;\r\n        const d = 10;\r\n\r\n        const camera = new OrthographicCamera(\r\n            -d * aspect,\r\n            d * aspect,\r\n            d,\r\n            -d,\r\n            1,\r\n            1000\r\n        );\r\n        camera.position.set(20, 20, 20);\r\n        camera.rotation.order = 'YXZ';\r\n        camera.rotation.y = -Math.PI / 4;\r\n        camera.rotation.x = Math.atan(-1 / Math.sqrt(2));\r\n        return camera;\r\n    }\r\n\r\n    createWebGLRenderer(width, height, canvas) {\r\n        const renderer = new WebGLRenderer({\r\n            canvas: canvas,\r\n            antialias: false,\r\n        });\r\n        renderer.setPixelRatio(window.devicePixelRatio);\r\n        renderer.shadowMap.enabled = true;\r\n        renderer.shadowMap.type = PCFSoftShadowMap;\r\n        renderer.setSize(width, height);\r\n        return renderer;\r\n    }\r\n\r\n    createLight(x, y, z) {\r\n        const light = new DirectionalLight(0xffffff, 1.5);\r\n        // const helper = new DirectionalLightHelper(light, 1, 0xff0000);\r\n        light.position.set(10, 10, 0);\r\n\r\n        // const helper = new PointLightHelper(light);\r\n        // this.#gui.addColor(new ColorGUIHelper(light, 'color'), 'value').name('color');\r\n        // this.#gui.add(light, 'intensity', 0, 2, 0.01);\r\n        // this.#gui.add(light, 'distance', 0, 40).onChange(updateLight);\r\n        // makeXYZGUI(this.#gui, light.position, 'position', updateLight);\r\n        // makeXYZGUI(this.#gui, light.rotation, 'rotation', updateLight);\r\n        // this.#scene.add(helper);\r\n        // function updateLight() {\r\n        //     helper.update();\r\n        // }\r\n\r\n        this.#scene.add(light);\r\n    }\r\n\r\n    createFloor() {\r\n        const texture = textureLoader.load(bg);\r\n        texture.wrapS = RepeatWrapping;\r\n        texture.wrapT = RepeatWrapping;\r\n        texture.repeat.set(90, 90);\r\n        texture.magFilter = NearestFilter;\r\n        const floorMaterial = new MeshStandardMaterial({\r\n            name: 'floor',\r\n            map: texture,\r\n        });\r\n        const floor = new Mesh(\r\n            new BoxGeometry(\r\n                this.#floorSize.x,\r\n                this.#floorSize.y,\r\n                this.#floorSize.z\r\n            ),\r\n            floorMaterial\r\n        );\r\n        floor.position.set(0, -this.#floorSize.y / 2, 0);\r\n        this.#scene.add(floor);\r\n    }\r\n\r\n    render() {\r\n        if (this.#hostsConnections.length > 0) {\r\n            this.#hostsConnections.forEach((connection) => {\r\n                console.log(connection);\r\n            });\r\n        }\r\n\r\n        for (let event in this.#elementsForAnimated) {\r\n            // console.log(this.#elementsForAnimated)\r\n            this.#elementsForAnimated[event]();\r\n        }\r\n        this.#renderer.render(this.#scene, this.#camera);\r\n        this.composer.render();\r\n        requestAnimationFrame(() => this.render());\r\n    }\r\n\r\n    get scene() {\r\n        return this.#scene;\r\n    }\r\n\r\n    get camera() {\r\n        return this.#camera;\r\n    }\r\n\r\n    get renderer() {\r\n        return this.#renderer;\r\n    }\r\n\r\n    get light() {\r\n        return this.#light;\r\n    }\r\n\r\n    get elementsForAnimated() {\r\n        return this.#elementsForAnimated;\r\n    }\r\n    \r\n    get segments(){\r\n        return this.#segments\r\n    }\r\n}\r\n\r\nclass ColorGUIHelper {\r\n    object;\r\n    prop;\r\n    constructor(object, prop) {\r\n        this.object = object;\r\n        this.prop = prop;\r\n    }\r\n    get value() {\r\n        return `#${this.object[this.prop].getHexString()}`;\r\n    }\r\n    set value(hexString) {\r\n        this.object[this.prop].set(hexString);\r\n    }\r\n}\r\n\r\nfunction makeXYZGUI(gui, vector3, name, onChangeFn) {\r\n    const folder = gui.addFolder(name);\r\n    folder.add(vector3, 'x', -10, 10).onChange(onChangeFn);\r\n    folder.add(vector3, 'y', 0, 10).onChange(onChangeFn);\r\n    folder.add(vector3, 'z', -10, 10).onChange(onChangeFn);\r\n    folder.open();\r\n}\r\n","<template>\n    <div id=\"app\">\n        <button v-if=\"!isStarted\" @click=\"start\">START</button>\n        <div class=\"mapContainer\">\n            <canvas ref=\"canvas\" class=\"canvas\"></canvas>\n            <div ref=\"hostHUD\" class=\"hostHUD\">\n                <div>Сегмент: <strong class=\"segmentName\"></strong></div>\n                <div>Хост: <strong class=\"hostName\"></strong></div>\n                <div>IP хоста: <strong class=\"hostIP\"></strong></div>\n            </div>\n\n            <div class=\"attack\">\n                Атака из сегмента:\n                <select name=\"segmentFrom\" @change=\"checkSegmentTo\" v-model=\"segmentFrom\">\n                    <option value=\"0\">Internet</option>\n                    <option value=\"1\">DMZ</option>\n                    <option value=\"2\">Data Center</option>\n                    <option value=\"3\">Office users</option>\n                    <option value=\"4\">ASU</option>\n                </select>\n                <br />\n                в сегмент:\n                <br />\n                <select name=\"segmentFrom\" v-model=\"segmentTo\">\n                    <option value=\"0\" :disabled=\"isDisabled(0)\">Internet</option>\n                    <option value=\"1\" :disabled=\"isDisabled(1)\">DMZ</option>\n                    <option value=\"2\" :disabled=\"isDisabled(2)\">Data Center</option>\n                    <option value=\"3\" :disabled=\"isDisabled(3)\">Office users</option>\n                    <option value=\"4\" :disabled=\"isDisabled(4)\">ASU</option>\n                </select>\n                <br />\n                <br />\n                <button ref=\"startAttack\" @click=\"startAttackSegment\">\n                    Начать атаку на сегмент\n                </button>\n                <br />\n                <br />\n                <button ref=\"startAttack\" @click=\"startAttackHost\">\n                    Начать атаку на хост\n                </button>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n<script>\n    import hostImage from './textures/host.jpg';\n    import { TextureLoader, Color } from 'three';\n    import { InteractiveMap } from './interactiveMap';\n    const textureLoader = new TextureLoader();\n\n    export default {\n        name: 'App',\n        data: () => {\n            return {\n                isStarted: false,\n                interactiveMap: {},\n                attackSegmentLines: [],\n                attackHostLines: [],\n                segmentFrom: '0',\n                segmentTo: '2',\n            };\n        },\n        mounted() {\n            this.isStarted = true;\n            this.interactiveMap = this.start(this.canvas, this.hostHUD);\n        },\n        methods: {\n            start(canvas, hostHUD) {\n                const rendererSizes = {\n                    width: window.innerWidth - 20,\n                    height: window.innerHeight - 20,\n                };\n                const lightPositions = { x: 10, y: 10, z: -4 };\n                const IM = new InteractiveMap(\n                    rendererSizes,\n                    lightPositions,\n                    canvas,\n                    hostHUD\n                );\n\n                const internetSegment = IM.createSegment(\n                    'Internet',\n                    -9,\n                    -3,\n                    'Internet'\n                );\n                const DMZSegment = IM.createSegment('DMZ', -3, -3, 'DMZ');\n                const DataCenterSegment = IM.createSegment(\n                    'Data Center',\n                    3,\n                    -3,\n                    'Data Center'\n                );\n                const OfficeUsersSegment = IM.createSegment(\n                    'Office users',\n                    9,\n                    -3,\n                    'Office users'\n                );\n                const ASUSegment = IM.createSegment('ASU', 15, -3, 'ASU');\n\n                const segments = [\n                    internetSegment,\n                    DMZSegment,\n                    DataCenterSegment,\n                    OfficeUsersSegment,\n                    ASUSegment,\n                ];\n\n                textureLoader.load(hostImage, (texture) => {\n                    texture.repeat.x = 0.4;\n                    texture.repeat.y = 0.4;\n                    texture.offset.set(0.5, 0.5);\n                    internetSegment.createHost(\n                        texture,\n                        'Kali',\n                        -1.5,\n                        -1.5,\n                        'Kali',\n                        '185.88.181.55'\n                    );\n                    internetSegment.createHost(\n                        texture,\n                        'ProxyChecker',\n                        0,\n                        -1.5,\n                        'Proxy\\nChecker',\n                        '185.88.181.88'\n                    );\n\n                    DMZSegment.createHost(\n                        texture,\n                        'CMS Drupal',\n                        -1.5,\n                        -1.5,\n                        'CMS\\n Drupal',\n                        '10.10.1.20'\n                    );\n                    DMZSegment.createHost(\n                        texture,\n                        'Web Server 2',\n                        0,\n                        -1.5,\n                        'Web\\n Server 2',\n                        '10.10.1.21'\n                    );\n                    DMZSegment.createHost(\n                        texture,\n                        'Appache Tomcat',\n                        1.5,\n                        -1.5,\n                        'Appache\\n Tomcat',\n                        '10.10.1.24'\n                    );\n                    DMZSegment.createHost(\n                        texture,\n                        'Security Onion',\n                        -1.5,\n                        0,\n                        'Security\\n Onion',\n                        '10.10.1.25'\n                    );\n\n                    DataCenterSegment.createHost(\n                        texture,\n                        'MS Active Directory',\n                        -1.5,\n                        -1.5,\n                        'MS Active \\nDirectory',\n                        '10.10.2.10'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'MS Exchange',\n                        0,\n                        -1.5,\n                        'MS \\nExchange',\n                        '10.10.2.11'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'MS FileServer',\n                        1.5,\n                        -1.5,\n                        'MS \\nFileServer',\n                        '10.10.2.12'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'Database Server',\n                        -1.5,\n                        -0.5,\n                        'Database \\nServer',\n                        '10.10.2.13'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'SSH Server',\n                        0,\n                        -0.5,\n                        'SSH \\nServer',\n                        '10.10.2.14'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'Redmine Server',\n                        1.5,\n                        -0.5,\n                        'Redmine \\nServer',\n                        '10.10.2.15'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'CMS Made Simple',\n                        -1.5,\n                        0.5,\n                        'CMS Made \\nSimple',\n                        '10.10.2.16'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'ViPNet IDS HS',\n                        0,\n                        0.5,\n                        'ViPNet \\nIDS HS',\n                        '10.10.2.17'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'ViPNet IDS NS',\n                        1.5,\n                        0.5,\n                        'ViPNet \\nIDS NS',\n                        '10.10.2.21'\n                    );\n                    DataCenterSegment.createHost(\n                        texture,\n                        'ViPNet TIAS',\n                        1.5,\n                        1.5,\n                        'ViPNet \\nTIAS',\n                        '10.10.2.23'\n                    );\n\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Administrator Workstation',\n                        -1.5,\n                        -1.5,\n                        'Administrator\\n Workstation',\n                        '10.10.4.10'\n                    );\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Manager Workstation 1',\n                        0,\n                        -1.5,\n                        'Manager\\n Workstation 1',\n                        '10.10.4.11'\n                    );\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Response Team Workstation',\n                        1.5,\n                        -1.5,\n                        'Response\\n Team Workstation',\n                        '10.10.4.12'\n                    );\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Insider Workstation',\n                        -1.5,\n                        0,\n                        'Insider Workstation',\n                        '10.10.4.17'\n                    );\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Developer Workstation',\n                        0,\n                        0,\n                        'Developer\\n Workstation',\n                        '10.10.4.13'\n                    );\n                    OfficeUsersSegment.createHost(\n                        texture,\n                        'Manager Workstation 2',\n                        1.5,\n                        0,\n                        'Manager\\n Workstation 2',\n                        '10.10.4.14'\n                    );\n\n                    ASUSegment.createHost(\n                        texture,\n                        'SCADA IGSS',\n                        -1.5,\n                        -1.5,\n                        'SCADA \\nIGSS',\n                        '10.10.3.10'\n                    );\n\n                    const router1 = IM.createRouter('router1', -6, 2);\n                    const router2 = IM.createRouter('router2', 0, 2);\n\n                    this.interactiveMap.createLine([\n                        {\n                            x: -8.5,\n                            y: 0,\n                            z: 2,\n                            width: 1,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                        {\n                            x: -9,\n                            y: 0,\n                            z: 0.3,\n                            width: 0.1,\n                            depth: 3.5,\n                            height: 0.1,\n                        },\n                    ]);\n                    this.interactiveMap.createLine([\n                        {\n                            x: -3,\n                            y: 0,\n                            z: 0.3,\n                            width: 0.1,\n                            depth: 3.5,\n                            height: 0.1,\n                        },\n                        {\n                            x: -3.5,\n                            y: 0,\n                            z: 2,\n                            width: 1,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                    ]);\n                    this.interactiveMap.createLine([\n                        {\n                            x: -2.8,\n                            y: 0,\n                            z: 0.3,\n                            width: 0.1,\n                            depth: 3.5,\n                            height: 0.1,\n                        },\n                        {\n                            x: -2.3,\n                            y: 0,\n                            z: 2,\n                            width: 1,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                    ]);\n\n                    this.interactiveMap.createLine([\n                        {\n                            x: 2,\n                            y: 0,\n                            z: 1,\n                            width: 2,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                        {\n                            x: 3,\n                            y: 0,\n                            z: 0,\n                            width: 0.1,\n                            depth: 2,\n                            height: 0.1,\n                        },\n                    ]);\n\n                    this.interactiveMap.createLine([\n                        {\n                            x: 5.5,\n                            y: 0,\n                            z: 2,\n                            width: 7,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                        {\n                            x: 9,\n                            y: 0,\n                            z: 0.5,\n                            width: 0.1,\n                            depth: 3.1,\n                            height: 0.1,\n                        },\n                    ]);\n\n                    this.interactiveMap.createLine([\n                        {\n                            x: 8,\n                            y: 0,\n                            z: 3,\n                            width: 14,\n                            depth: 0.1,\n                            height: 0.1,\n                        },\n                        {\n                            x: 15,\n                            y: 0,\n                            z: 1,\n                            width: 0.1,\n                            depth: 4,\n                            height: 0.1,\n                        },\n                    ]);\n                });\n\n                // .hosts[0])\n                // .instance.children[0].color)\n                return IM;\n            },\n\n            startAttackSegment() {\n                this.interactiveMap.segments.forEach(segment => {\n                    segment.instance.children[0].material.color = new Color(1, 1, 1);\n                })\n                const segmentFrom =\n                    this.interactiveMap.segments[this.segmentFrom].instance;\n                console.log(segmentFrom.position);\n                const segmentTo =\n                    this.interactiveMap.segments[this.segmentTo].instance;\n                console.log(segmentTo.position);\n\n                this.interactiveMap.scene.remove(...this.attackSegmentLines);\n                const fromX = segmentFrom.position.x;\n                const fromY = 0;\n                const fromZ = segmentFrom.position.z - 2.5;\n                const toZ = segmentTo.position.z;\n                const toX = segmentTo.position.x;\n                const defaultLength = 3;\n                console.log(toZ);\n                const distance = segmentFrom.position.distanceTo(\n                    segmentTo.position\n                );\n                const linesData = [\n                    {\n                        x: fromX,\n                        y: fromY,\n                        z: fromZ,\n                        width: 0.1,\n                        depth: 1,\n                        height: 0.1,\n                        color: 'red',\n                        animation: {\n                            direction: 'z',\n                            toScale: defaultLength,\n                            toPosition: fromZ - 1,\n                            method: '-',\n                        },\n                    },\n                    {\n                        x: fromX + 0.5,\n                        y: 0,\n                        z: -8,\n                        width: 1,\n                        depth: 0.1,\n                        height: 0.1,\n                        color: 'red',\n                        animation: {\n                            direction: 'x',\n                            toScale: distance,\n                            toPosition: toX - distance / 2,\n                            method: '+',\n                        },\n                    },\n                    {\n                        x: toX,\n                        y: 0,\n                        z: fromZ - 2,\n                        width: 0.1,\n                        depth: 1,\n                        height: 0.1,\n                        color: 'red',\n                        animation: {\n                            direction: 'z',\n                            toScale: defaultLength,\n                            toPosition: toZ - defaultLength - 0.5,\n                            method: '+',\n                        },\n                    },\n                ];\n\n                const attackLines = this.interactiveMap.createLine(linesData);\n                const target = segmentTo.children[0];\n                this.addAttackAnimation(\n                    'attackSegment',\n                    linesData,\n                    attackLines,\n                    target\n                );\n                this.attackSegmentLines = attackLines;\n            },\n\n            startAttackHost() {\n                this.interactiveMap.scene.remove(...this.attackHostLines);\n                const linesData = [\n                    {\n                        x: -10.5,\n                        y: 1,\n                        z: -4.5,\n                        width: 0.1,\n                        depth: 0.1,\n                        height: 1,\n                        color: 'red',\n                        animation: {\n                            direction: 'y',\n                            toScale: 3,\n                            toPosition: 2,\n                            method: '+',\n                        },\n                    },\n                    {\n                        x: -10,\n                        y: 3.5,\n                        z: -4.5,\n                        width: 1,\n                        depth: 0.1,\n                        height: 0.1,\n                        color: 'red',\n                        animation: {\n                            direction: 'x',\n                            toScale: 12,\n                            toPosition: -4.5,\n                            method: '+',\n                        },\n                    },\n                    {\n                        x: 1.5,\n                        y: 3,\n                        z: -4.5,\n                        width: 0.1,\n                        depth: 0.1,\n                        height: 1,\n                        color: 'red',\n                        animation: {\n                            direction: 'y',\n                            toScale: 3,\n                            toPosition: 2,\n                            method: '-',\n                        },\n                    },\n                ];\n\n                const attackLines = this.interactiveMap.createLine(linesData);\n                const target =\n                    this.interactiveMap.segments[2].hosts[0].instance\n                        .children[0];\n                this.addAttackAnimation(\n                    'attackHost',\n                    linesData,\n                    attackLines,\n                    target\n                );\n                this.attackHostLines = attackLines;\n            },\n\n            addAttackAnimation(animationName, linesData, attackLines, target) {\n                let animateStep = 0;\n                this.interactiveMap.elementsForAnimated[animationName] = () => {\n                    if (animateStep >= attackLines.length) {\n                        delete this.interactiveMap.elementsForAnimated[\n                            animationName\n                        ];\n                        target.material.color = new Color('red');\n                        return;\n                    }\n                    const lineData = linesData[animateStep]?.animation;\n                    if (!lineData) return;\n\n                    const line = attackLines[animateStep];\n                    if (!line) return;\n\n                    if (!line.material.visible) line.material.visible = true;\n\n                    const curScale = line.scale[lineData.direction];\n                    if (curScale < lineData.toScale) {\n                        line.scale[lineData.direction] += 0.1;\n                    }\n\n                    const curPosition = line.position[lineData.direction];\n\n                    if (\n                        lineData.method == '+' &&\n                        curPosition < lineData.toPosition\n                    ) {\n                        line.position[lineData.direction] += 0.05;\n                    } else if (\n                        lineData.method == '-' &&\n                        curPosition > lineData.toPosition\n                    ) {\n                        line.position[lineData.direction] -= 0.05;\n                    } else {\n                        animateStep++;\n                    }\n                };\n            },\n\n            isDisabled(segmentIndex){\n                return segmentIndex <= this.segmentFrom\n            },\n\n            checkSegmentTo(){\n                if (this.segmentTo <= this.segmentFrom){\n                    this.segmentTo = undefined;\n                }\n            }\n        },\n        computed: {\n            canvas() {\n                return this.$refs.canvas;\n            },\n            hostHUD() {\n                return this.$refs.hostHUD;\n            },\n        },\n    };\n</script>\n<style>\n    body {\n        margin: 0;\n        padding: 0;\n    }\n</style>\n<style scoped>\n    .hostHUD {\n        width: 200px;\n        height: 200px;\n        border: 1px solid #000;\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        background: #fff;\n        padding: 5px;\n    }\n\n    .mapContainer {\n        width: calc(100vw - 20px);\n        height: calc(100vh - 20px);\n        position: relative;\n    }\n\n    .attack{\n        width: 200px;\n        padding: 10px;\n        position: fixed;\n        left: 0;\n        top: 0;\n        border:1px solid #000;\n        background-color: #fff;\n    }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2d7cd758&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=2d7cd758&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d7cd758\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/host.4cb4c779.jpg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=2d7cd758&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAFRQTFRFkJCQq6ursLCwr6+vsbGxnJycs7Oz9/f3+/v7+vr6+fn5wcHB/v7+/f39////xMTE/Pz8xcXFtLS0w8PDtbW1np6ex8fHzMzMy8vLysrKzc3Nqamp8fI/vQAAAIpJREFUeJztks0SwiAMhCPFGmoSoK2C+v7vaeg4Hvh5AcdvT2GzEw4LcDLTZFQ11pgzzBd0DlU1y4JXsI4UVlUIiYcZpQ9L8JqVY48aO0iE1VHfZZHtuFuGNisUy13qevr2d3/CHcH+25ymk1Q6uQ6zFCJY/HSySQpH2EdZKr+63VN+JFWueKb8egO60itONTc82AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEVQTFRFTk5OXFxcX19fXl5eYGBgVFRUYWFhhYWFiIiIh4eHhoaGaGhoiYmJioqKampqaWlpYmJiVVVVa2trbm5ubW1tb29vW1tbkyex5wAAAHlJREFUeJztkksOgCAMRCsqFmzxg3r/owqNJgarexNnVvCYlsUAVKauTXKpxpgWbIfOYXIp77GHxpEuJg5gkXURY0hZlnd0w5izjnSaLgbZexxuXPaSys5f/fTr9El0aY7Syrcs5U4i61mZPD72OU+e5hgXcaE1xm0HXi8oG6/8F6QAAAAASUVORK5CYII=\""],"sourceRoot":""}